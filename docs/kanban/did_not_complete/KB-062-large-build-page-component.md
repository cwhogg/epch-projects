# KB-062: Large page component with streaming logic, polling, and rendering combined

- **Type:** simplification
- **Discovered during:** finishing-a-development-branch (code-simplifier)
- **Location:** `src/app/website/[id]/build/page.tsx:22-661`
- **Observed:** The `WebsiteBuilderPage` component is 661 lines with streaming logic, polling, signal handling, state management, and rendering all in one function. The main component body contains ~300 lines of logic before the return statement.
- **Expected:** Extract streaming/chat logic into a custom hook (e.g., `useChatStream`) that encapsulates message state, streaming, polling, and signal handling. Current structure is functional — flagging for future awareness.
- **Why out of scope:** Simplification opportunity — not a bug or part of the current task
- **Severity:** LOW
- **Created:** 2026-02-17
- **Resolved:** 2026-02-17
- **Fix:** Closed during triage — component is large but cohesive. The streaming, signal, and polling functions are tightly coupled by design (streamResponse calls handleSignal, handleSignal calls streamResponse and startPolling, startPolling calls streamResponse). Extracting to a useChatStream hook would relocate this coupling across a module boundary without reducing it, adding file-jumping overhead for a two-person team with no reuse case. Sub-components (BuildHeader, ChatBubble, AssistantContent, InlineContent, StepItem, ModeCard, lines 664–978) are already extracted where natural separation exists. The KB was generated by a line-count heuristic, and the KB itself flagged this as out of scope at creation time.
